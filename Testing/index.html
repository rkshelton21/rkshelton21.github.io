<!DOCTYPE html>
<html>
  <head>
    <script>
      try
      {
          var jst = document.getElementById("jsTest1");
          jst.innerHTML = jst.innerHTML.replace("Not", "Is");
      }
      catch(err)
      {
          document.getElementById("errs").innerHTML += err.message;
      }
      
      try
      {
          function bindAsyncLoad ()
          {
              $('#loadButton').on('click', loadAsync);
          };
          
          function loadAsync ()
          {
              $.getScript( $('#ajaxLoad').val() )
                  .done(function( script, textStatus ) 
                  {
                      var newDiv = '<div class="d">TEMP: Loaded</div>';
                      newDiv = newDiv.replace('TEMP', $('#ajaxLoad').val());
                      $('#ajaxLoad').val('');
                      $('.d').last().append(newDiv);
                  })
                  .fail(function( jqxhr, settings, exception ) 
                  {
                      document.getElementById("errs").innerHTML += "<p>" + "Triggered ajaxError handler: " + exception + "</p>";
                  });
          };
      }
      catch(err)
      {
          document.getElementById("errs").innerHTML += err.message;
      }
      
      try
      {
          // Anonymous "self-invoking" function
          (function() {
              // Load the script
              var script = document.createElement("SCRIPT");
              script.src = 'https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js';
              script.type = 'text/javascript';
              document.getElementsByTagName("head")[0].appendChild(script);
          
              // Poll for jQuery to come into existance
              var checkReady = function(callback) {
                  if (window.jQuery) {
                      callback(jQuery);
                  }
                  else {
                      window.setTimeout(function() { checkReady(callback); }, 100);
                  }
              };
          
              // Start polling...
              checkReady(function($) {
                  try
                  {
                      $('#jsTest2').html($('#jsTest2').html().replace('Not', 'Is'));
                      bindAsyncLoad();
                      $('#ClearErrors').on('click', function(){ document.getElementById("errs").innerHTML = ''});
                  }
                  catch(err)
                  {
                      document.getElementById("errs").innerHTML += err.message;
                  }
              });
          })();
      }
      catch(err)
      {
          alert(err);
          document.getElementById("errs").innerHTML += err.message;
      }

    </script>
  </head>
  <body>
    <div id="jsTest1" class="d">Javascript is: Not working.</div>
    <div id="jsTest2" class="d">JQuery is: Not Loaded.</div>
    <input id="ajaxLoad" style="float:left"></input>
    <button id="loadButton">Load Async</button>
    <p></p>
    <div id="errs">Errors:</div>
    <button id="ClearErrors">Clear Errors</button>
  </body>
</html>
